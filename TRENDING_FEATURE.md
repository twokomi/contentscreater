# 🔥 실시간 인기 키워드 대시보드 기능

## 개요

YCPA에 **실시간 인기 키워드 대시보드**가 추가되었습니다!

이제 정치, 경제, 사회, 문화 등 다양한 분야에서 현재 가장 핫한 키워드가 무엇인지 **데일리/위클리** 순위로 한눈에 확인할 수 있습니다.

## 🎯 주요 기능

### 1. 카테고리별 트렌드
- **전체**: 모든 분야 통합
- **정치**: 선거, 정책, 국회 등
- **경제**: 주식, 부동산, 금리 등
- **사회**: 교육, 복지, 환경 등
- **문화**: 드라마, 영화, K-POP 등
- **기술**: AI, 스마트폰, 반도체 등
- **스포츠**: 야구, 축구, 올림픽 등

### 2. 기간별 트렌드
- **데일리**: 오늘의 인기 키워드
- **위클리**: 이번 주 인기 키워드

### 3. 상세 정보
각 키워드마다 다음 정보 제공:
- **순위**: 1~20위
- **키워드명**: 핵심 키워드
- **트렌드**: ↑ 상승 | ↓ 하락 | - 유지
- **평균 조회수**: 해당 키워드 영상 평균 조회수
- **영상 개수**: 관련 인기 영상 수
- **점수**: 종합 인기도 점수

## 🎨 UI/UX

### 대시보드 레이아웃

```
┌─────────────────────────────────────────────┐
│ 🔥 실시간 인기 키워드                        │
│                                              │
│  [전체▼]  [데일리▼]  [🔄 새로고침]          │
├─────────────────────────────────────────────┤
│                                              │
│  #1 ↑  대선      #2 ↑  주식                │
│  👁 1.2M         👁 980K                     │
│  📹 15개         📹 23개                     │
│                                              │
│  #3 - AI        #4 ↓  부동산               │
│  👁 850K         👁 720K                     │
│  📹 18개         📹 12개                     │
│                                              │
└─────────────────────────────────────────────┘
```

### 인터랙션

1. **키워드 클릭**
   - 클릭하면 하단 "키워드 트렌드 분석" 섹션에 자동 입력
   - 즉시 해당 키워드 상세 분석 가능

2. **새로고침**
   - 최신 데이터로 업데이트 (30분 캐시)

3. **카테고리/기간 변경**
   - 자동으로 새로운 데이터 로드

## 💻 작동 방식

### MVP 모드 (API 키 없음)
```
1. 사용자가 카테고리/기간 선택
   ↓
2. 미리 정의된 키워드 풀에서 생성
   ↓
3. 랜덤하지만 현실적인 순위 부여
   ↓
4. 즉시 표시 (지연 없음)
```

**특징:**
- ✅ 완전 무료
- ✅ API 키 불필요
- ✅ 즉시 표시
- ✅ 참고용으로 충분히 유용

### Pro 모드 (YouTube API 사용)
```
1. 사용자가 카테고리/기간 선택
   ↓
2. YouTube Trending API 호출
   ↓
3. 해당 카테고리 인기 영상 50개 수집
   ↓
4. 영상 제목에서 키워드 추출
   ↓
5. 빈도수, 조회수 기반 점수 계산
   ↓
6. 상위 20개 키워드 순위화
   ↓
7. 표시 (캐시 30분)
```

**특징:**
- ✅ 실제 YouTube 인기 영상 기반
- ✅ 정확한 트렌드 파악
- ✅ 조회수, 좋아요 등 실제 데이터
- ✅ 30분 캐싱으로 API 할당량 절약

## 🔢 키워드 점수 계산 알고리즘

```javascript
점수 = (키워드 빈도 × 2) + 
       (총 조회수 ÷ 1,000,000) + 
       (총 좋아요 ÷ 10,000)
```

**예시:**
- 키워드: "AI"
- 빈도: 15개 영상에서 언급
- 총 조회수: 5,000,000
- 총 좋아요: 100,000

```
점수 = (15 × 2) + (5,000,000 ÷ 1,000,000) + (100,000 ÷ 10,000)
    = 30 + 5 + 10
    = 45
```

## 📊 YouTube API 사용량

### API 호출
- **엔드포인트**: `videos.list`
- **비용**: 1 unit per request
- **파라미터**:
  - `chart=mostPopular` (인기 영상)
  - `maxResults=50`
  - `regionCode=KR` (한국)
  - `videoCategoryId=25` (뉴스/정치)

### 할당량 계산
```
일일 무료 할당량: 10,000 units

1회 트렌딩 조회: 1 unit
캐싱 시간: 30분

하루 최대 호출:
- 카테고리 7개 × 기간 2개 = 14가지
- 각 30분 캐싱 → 하루 48회 갱신
- 14 × 48 = 672 units/일
- 충분히 여유 있음! ✅
```

## 🎯 사용 시나리오

### 시나리오 1: 콘텐츠 아이디어 발굴
```
1. 트렌드 탭 열기
2. "문화" 카테고리 선택
3. 상위 키워드 확인: "드라마", "배우", "K-POP"
4. "드라마" 클릭
5. 상세 분석으로 자동 이동
6. 프로젝트 생성!
```

### 시나리오 2: 시의성 있는 콘텐츠
```
1. "데일리" 모드 선택
2. 오늘의 핫 키워드 확인
3. 빠르게 콘텐츠 기획
4. 트렌드에 올라탄 영상 제작
```

### 시나리오 3: 분야별 모니터링
```
1. "정치" → 이번 주 이슈 확인
2. "경제" → 투자 트렌드 파악
3. "기술" → 최신 기술 동향 체크
```

## 🔧 커스터마이징

### 카테고리 추가

`api/trends/trending.js` 파일에서:

```javascript
const YOUTUBE_CATEGORIES = {
  'politics': '25',
  'economy': '25',
  'society': '25',
  'culture': '24',
  'tech': '28',
  'sports': '17',
  'gaming': '20',     // 게임 추가
  'education': '27',  // 교육 추가
  'custom': '29'      // 커스텀 카테고리
};
```

`index.html`에서:

```html
<select id="trending-category">
  <option value="all">전체</option>
  <option value="politics">정치</option>
  ...
  <option value="gaming">게임</option>
  <option value="education">교육</option>
</select>
```

### 표시 키워드 수 변경

`api/trends/trending.js`에서:

```javascript
// 현재: 상위 20개
return keywordArray.slice(0, 20).map((kw, index) => {

// 변경: 상위 30개
return keywordArray.slice(0, 30).map((kw, index) => {
```

### 캐싱 시간 변경

```javascript
// 현재: 30분
const CACHE_DURATION = 30 * 60 * 1000;

// 변경: 1시간
const CACHE_DURATION = 60 * 60 * 1000;

// 변경: 10분 (더 자주 업데이트)
const CACHE_DURATION = 10 * 60 * 1000;
```

## 📈 성능 최적화

### 1. 캐싱 전략
- 30분 메모리 캐시
- 동일 요청 반복 방지
- API 할당량 절약

### 2. 데이터 압축
- 상위 20개만 표시
- 관련 영상 최대 3개로 제한
- 불필요한 데이터 제거

### 3. 에러 처리
- API 실패 시 자동 MVP 모드 폴백
- 사용자는 항상 데이터 확인 가능
- 끊김 없는 UX

## 🐛 문제 해결

### "인기 키워드를 불러올 수 없습니다"

**원인:**
- YouTube API 할당량 초과
- API 키 없음 또는 잘못됨
- 네트워크 에러

**해결:**
1. 자동으로 MVP 모드 데이터 표시됨
2. 30분 후 다시 시도
3. 또는 다음 날 할당량 리셋 대기

### 트렌드가 업데이트되지 않음

**원인:**
- 캐시 때문에 30분 동안 동일 데이터

**해결:**
1. "새로고침" 버튼 클릭
2. 캐시는 30분 후 자동 갱신
3. 더 자주 업데이트 원하면 `CACHE_DURATION` 수정

## 📚 추가 자료

- [YouTube Data API - Videos.list](https://developers.google.com/youtube/v3/docs/videos/list)
- [YouTube 카테고리 ID 목록](https://developers.google.com/youtube/v3/docs/videoCategories/list)
- [API 할당량 관리](https://developers.google.com/youtube/v3/getting-started#quota)

## 🎉 결론

**실시간 인기 키워드 대시보드**로 이제:

1. ✅ 트렌드를 빠르게 파악하고
2. ✅ 시의성 있는 콘텐츠를 기획하며
3. ✅ 분야별 동향을 모니터링하고
4. ✅ 데이터 기반 의사결정을 할 수 있습니다!

**MVP 모드로도 충분히 유용하고, Pro 모드로 더 정확한 데이터를 확인하세요!** 🚀
